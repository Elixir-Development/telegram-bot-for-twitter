= 准备工作
:!webfonts:

我目前在用的操作系统是 macOS，macOS 上使用 https://brew.sh[homebrew] 安装 Elixir 是最简单的，`brew install elixir` - 该命令会同时安装 Erlang。

Elixir 及 Erlang 的版本号可以通过命令 `mix hex.info` 查看：

[source,sh]
----
$ mix hex.info
Hex:    0.18.1
Elixir: 1.7.3
OTP:    21.0.9

Built with: Elixir 1.6.6 and OTP 19.3
----

安装好 Elixir、Erlang 后，运行 mix 命令安装 Phoenix：

[source,sh]
----
$ mix archive.install hex phx_new 1.4.0
----

`mix phx.new --version` 可以查看当前安装的 Phoenix 版本号：

[source,sh]
----
$ mix phx.new --version
Phoenix v1.4.0
----
至于 Node.js - 我作为一个专职前端开发，当然是早已安装。

== 初始化项目

一切准备就绪后，执行 `mix phx.new` 命令初始化 Phoenix 项目：

[source,sh]
----
$ mix phx.new tweet_bot
----
默认情况下，Phoenix 使用 PostgreSQL 数据库，如果想使用 MySQL，请在命令行下指定 `--database mysql`。

项目初始化完成，会在命令行中看到如下提示：

----
We are all set! Go into your application by running:

    $ cd tweet_bot

Then configure your database in config/dev.exs and run:

    $ mix ecto.create

Start your Phoenix app with:

    $ mix phx.server

You can also run your app inside IEx (Interactive Elixir) as:

    $ iex -S mix phx.server
----
按提示操作，就能在 http://0.0.0.0:4000 上启动 Phoenix 开发服务器。

== 创建 telegram bot

我需要创建两个 telegram 机器人。一个用于开发环境，一个用于生产环境：

. https://t.me/tweet_for_me_test_bot[https://t.me/tweet_for_me_test_bot] - 开发用途
. https://t.me/tweet_for_me_bot[https://t.me/tweet_for_me_bot] - 生产环境使用

具体创建过程请查阅 https://core.telegram.org/bots#3-how-do-i-create-a-bot[telegram 文档]，这里略过不表。

创建好 telegram 机器人，我们会获得一串 `token`，后面我们将用这串 `token` 设置一个 https://core.telegram.org/bots/api#setwebhook[webhook] - 这样 telegram 会将机器人收到的消息全部转发到 webhook。